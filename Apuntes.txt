Crear un servidor Eureka con las siguientes opciones.

Comando:
  docker run -p 8181:8080 -e KEYCLOAK_ADMIN=admin -e KEYCLOAK_ADMIN_PASSWORD=admin quay.io/keycloak/keycloak:25.0.6 start-dev
  andres@AsusTUF:/opt/keycloack$ bin/kc.sh start-dev --http-port=8181
  
1. Crear un Realm llamado spring-boot-microservices-realm
2. Crear un Client con las siguientes opciones:
  1. Nombre: spring-cloud-client
  2. Quitamos Standard flow y Direct Access Grant y activamos Client Authorization y Service Account Roles.
  3. Guardamos el cliente y vemos el Secret en Credentials.

3. El Secret nos servir√° para solicitar un Token con Postman
  1. Poner en el campo Access Token Url el token_endpoint.
  2. Client Id = spring-cloud-client
  3. Client Secret = Secret
  4. Credentials As Basic Auth Header (default)
  5. Solicitar Token y hacer solicitud a la API



keycloak old configuration with another image:
  # keycloak:
  #   image: quay.io/keycloak/keycloak:25.0.6
  #   restart: on-failure
  #   command: start-dev
  #   container_name: keycloak
  #   environment:
  #     KC_HOSTNAME: localhost
  #     KC_HOSTNAME_STRICT_BACKCHANNEL: false
  #     KC_HTTP_ENABLED: true
  #     KC_HOSTNAME_STRICT_HTTPS: false
  #     KC_HEALTH_ENABLED: true
  #     KEYCLOAK_ADMIN: admin 
  #     KEYCLOAK_ADMIN_PASSWORD: admin
  #   ports:
  #     - 8181:8080
  #   volumes:
  #     - ./volumes/keycloak:/opt/keycloak/data
  #   networks:
  #     - keycloak_network